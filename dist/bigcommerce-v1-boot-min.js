!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){n(1),e.exports=n(3)},function(e,t,n){(function(e){!function(){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}try{self}catch(t){try{e}catch(t){window}}var l=function(){function e(n,i){t(this,e),this.cursor=0,this.collection=n,this.kind=i}return e.prototype.next=function(){this.done=this.cursor===this.collection.length;var e={done:this.done,value:this.done?void 0:"value"===this.kind||"key"===this.kind?this.collection[this.cursor]:[this.cursor,this.collection[this.cursor]]};return this.cursor++,e},e}(),u=function(e){function t(r,o){return n(this,t),i(this,e.call(this,r,o))}return r(t,e),t.prototype.toString=function(){return"[object String Iterator]"},t}(l),d=function(e){function t(n,i){return o(this,t),s(this,e.call(this,n,i))}return a(t,e),t.prototype.toString=function(){return"[object Array Iterator]"},t}(l);if("function"!=typeof Array.prototype[Symbol.iterator]){var c="values"in Array.prototype,f="entries"in Array.prototype,p="keys"in Array.prototype;c||(Array.prototype.values=function(){return new d(this,"value")}),f||(Array.prototype.entries=function(){return new d(this,"key+value")}),p||(Array.prototype.keys=function(){return new d(this,"key")}),Array.prototype[Symbol.iterator]=Array.prototype.values}if("function"!=typeof String.prototype[Symbol.iterator]&&(String.prototype[Symbol.iterator]=function(){return new u(this,"value")}),"function"!=typeof NodeList.prototype[Symbol.iterator]){var y="values"in NodeList.prototype,h="entries"in NodeList.prototype,m="keys"in NodeList.prototype;y||(NodeList.prototype.values=function(){return new d(this,"value")}),h||(NodeList.prototype.entries=function(){return new d(this,"key+value")}),m||(NodeList.prototype.keys=function(){return new d(this,"key")}),NodeList.prototype[Symbol.iterator]=Array.prototype.values}}()}).call(t,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n(4),function(e,t){var n=function(){t.AF=t.AF||{},t.AF._plugin=new AF.BigCommercePlugin({nzKey:t.AddressFinderConfig.key_nz||t.AddressFinderConfig.key||t.AddressFinderConfig.key_au,auKey:t.AddressFinderConfig.key_au||t.AddressFinderConfig.key||t.AddressFinderConfig.key_nz,nzWidgetOptions:t.AddressFinderConfig.nzWidgetOptions||t.AddressFinderConfig.widgetOptions||{},auWidgetOptions:t.AddressFinderConfig.auWidgetOptions||t.AddressFinderConfig.widgetOptions||{},debug:t.AddressFinderConfig.debug||!0})},i=e.createElement("script");i.src="https://api.addressfinder.io/assets/v3/widget.js",i.async=1,i.onload=n,e.body.appendChild(i)}(document,window)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(5),function(e,t){t.AF=t.AF||{},t.AF.BigCommercePlugin=function(){function n(e){i(this,n),this.version="1.1.12",this.widgetConfig=e,this.layoutConfigurations=[{label:"Optimized one-page checkout (Early access)",layoutIdentifier:"micro-app-ng-checkout",countryIdentifier:"countryCodeInput",searchIdentifier:"addressLine1Input",nz:{countryValue:"string:NZ",elements:{address1:"addressLine1Input",suburb:"addressLine2Input",city:"cityInput",region:"provinceInput",postcode:"postCodeInput"},regionMappings:null},au:{countryValue:"string:AU",elements:{address1:"addressLine1Input",address2:"addressLine2Input",suburb:"cityInput",state:"provinceCodeInput",postcode:"postCodeInput"},stateMappings:{ACT:"string:ACT",NSW:"string:NSW",NT:"string:NT",QLD:"string:QLD",SA:"string:SA",TAS:"string:TAS",VIC:"string:VIC",WA:"string:WA"}}},{label:"One-page checkout (Billing details)",layoutIdentifier:"CheckoutStepBillingAddress",countryIdentifier:"FormField_11",searchIdentifier:"FormField_8",nz:{countryValue:"New Zealand",elements:{address1:"FormField_8",suburb:"FormField_9",city:"FormField_10",region:"FormField_12",postcode:"FormField_13"},regionMappings:null},au:{countryValue:"Australia",elements:{address1:"FormField_8",address2:"FormField_9",suburb:"FormField_10",state:"FormField_12",postcode:"FormField_13"},stateMappings:{ACT:"Australian Capital Territory",NSW:"New South Wales",NT:"Northern Territory",QLD:"Queensland",SA:"South Australia",TAS:"Tasmania",VIC:"Victoria",WA:"Western Australia"}}},{label:"One-page checkout (Shipping details)",layoutIdentifier:"CheckoutStepShippingAddress",countryIdentifier:"FormField_21",searchIdentifier:"FormField_18",nz:{countryValue:"New Zealand",elements:{address1:"FormField_18",suburb:"FormField_19",city:"FormField_20",region:"FormField_22",postcode:"FormField_23"},regionMappings:null},au:{countryValue:"Australia",elements:{address1:"FormField_18",address2:"FormField_19",suburb:"FormField_20",state:"FormField_22",postcode:"FormField_23"},stateMappings:{ACT:"Australian Capital Territory",NSW:"New South Wales",NT:"Northern Territory",QLD:"Queensland",SA:"South Australia",TAS:"Tasmania",VIC:"Victoria",WA:"Western Australia"}}},{label:"Create account",layoutIdentifier:"CreateAccountForm",countryIdentifier:"FormField_11",searchIdentifier:"FormField_8",nz:{countryValue:"New Zealand",elements:{address1:"FormField_8",suburb:"FormField_9",city:"FormField_10",region:"FormField_12",postcode:"FormField_13"},regionMappings:null},au:{countryValue:"Australia",elements:{address1:"FormField_8",address2:"FormField_9",suburb:"FormField_10",state:"FormField_12",postcode:"FormField_13"},stateMappings:{ACT:"Australian Capital Territory",NSW:"New South Wales",NT:"Northern Territory",QLD:"Queensland",SA:"South Australia",TAS:"Tasmania",VIC:"Victoria",WA:"Western Australia"}}}],this.formHelpers=[],this.identifyLayout(),this.monitorMutations()}return r(n,[{key:"identifyLayout",value:function(){for(var t=0;t<this.layoutConfigurations.length;t++){var n=this.layoutConfigurations[t];e.getElementById(n.layoutIdentifier)&&(this.log("Identified layout named: "+n.label),this.initialiseFormHelper(n))}}},{key:"initialiseFormHelper",value:function(t){if(e.getElementById(t.searchIdentifier)){var n={countryElement:e.getElementById(t.countryIdentifier),label:t.label,layoutIdentifier:t.layoutIdentifier,nz:{countryValue:t.nz.countryValue,searchElement:e.getElementById(t.nz.elements.address1),elements:{address_line_1_and_2:e.getElementById(t.nz.elements.address1),address_line_1:null,address_line_2:null,suburb:e.getElementById(t.nz.elements.suburb),city:e.getElementById(t.nz.elements.city),region:e.getElementById(t.nz.elements.region),postcode:e.getElementById(t.nz.elements.postcode)},regionMappings:null},au:{countryValue:t.au.countryValue,searchElement:e.getElementById(t.au.elements.address1),elements:{address_line_1_and_2:null,address_line_1:e.getElementById(t.au.elements.address1),address_line_2:e.getElementById(t.au.elements.address2),locality_name:e.getElementById(t.au.elements.suburb),city:null,state_territory:e.getElementById(t.au.elements.state),postcode:e.getElementById(t.au.elements.postcode)},stateMappings:t.au.stateMappings}},i=new AF.FormHelper(this.widgetConfig,n);this.formHelpers.push(i)}}},{key:"resetAndReloadFormHelpers",value:function(){for(var e=[],t=0;t<this.formHelpers.length;t++){var n=this.formHelpers[t];n.areAllElementsStillInTheDOM()?(this.log("formHelper "+n.label+" is still active"),e.push(n)):(this.log("Destroying formHelper "+n.label),n.destroy())}this.formHelpers=e,this.identifyAdditionalLayouts()}},{key:"identifyAdditionalLayouts",value:function(){for(var t=[],n=0;n<this.layoutConfigurations.length;n++){var i=this.layoutConfigurations[n],r=i.layoutIdentifier;e.getElementById(r)&&(this.anyFormHelpersWithLayoutIdentifier(r)||(this.log("Identified additional layout named: "+i.label),t.push(i)))}for(var n=0;n<t.length;n++)this.initialiseFormHelper(t[n])}},{key:"anyFormHelpersWithLayoutIdentifier",value:function(e){for(var t=0;t<this.formHelpers.length;t++){if(this.formHelpers[t].layoutIdentifier==e)return!0}return!1}},{key:"mutationHandler",value:function(e){for(var t=!0,n=0;n<e.length;n++)if(!e[n].target.classList.contains("af_list")){t=!1;break}t||(this._mutationTimeout&&clearTimeout(this._mutationTimeout),this._mutationTimeout=setTimeout(this.resetAndReloadFormHelpers.bind(this),750))}},{key:"monitorMutations",value:function(){if(t.MutationObserver){new MutationObserver(this.mutationHandler.bind(this)).observe(e.body,{childList:!0,subtree:!0})}else t.addEventListener?e.body.addEventListener("DOMAttrModified",this.mutationHandler.bind(this),!1):t.console&&console.info("AddressFinder Error - please use a more modern browser")}},{key:"log",value:function(e){this.widgetConfig.debug&&t.console&&console.log(e)}}]),n}()}(document,window)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e,t){t.AF=t.AF||{},t.AF.FormHelper=function(){function n(e,t){i(this,n),this.widgetConfig=e,this.formHelperConfig=t,this.widgets={},this.subscriptions={},this.label=t.label,this.layoutIdentifier=t.layoutIdentifier,this._bindToForm()}return r(n,[{key:"destroy",value:function(){for(var e in this.widgets)this.widgets[e].disable(),this.widgets[e].destroy();this.widgets=null,this.subscriptions=[],this.formHelperConfig.countryElement.removeEventListener("change",this.boundCountryChangedListener)}},{key:"areAllElementsStillInTheDOM",value:function(){if(!e.body.contains(this.formHelperConfig.countryElement))return this._log("Country Element is not in the DOM"),!1;for(var t=["nz","au"],n=0;n<t.length;n++){var i=t[n];if(this.formHelperConfig[i]){if(!e.body.contains(this.formHelperConfig[i].searchElement))return this._log("Search Element is not in the DOM"),!1;for(var r in this.formHelperConfig[i].elements)if(this.formHelperConfig[i].elements.hasOwnProperty(r)){var o=this.formHelperConfig[i].elements[r];if(o&&!e.body.contains(o))return this._log("Element "+r+" is not in the DOM"),!1}}}return!0}},{key:"_bindToForm",value:function(){this.boundCountryChangedListener=this._countryChanged.bind(this),this.formHelperConfig.countryElement.addEventListener("change",this.boundCountryChangedListener);var e=new t.AddressFinder.Widget(this.formHelperConfig.nz.searchElement,this.widgetConfig.nzKey,"nz",this.widgetConfig.nzWidgetOptions);e.on("result:select",this._nzAddressSelected.bind(this)),this.widgets.nz=e;var n=new t.AddressFinder.Widget(this.formHelperConfig.au.searchElement,this.widgetConfig.auKey,"au",this.widgetConfig.auWidgetOptions);n.on("result:select",this._auAddressSelected.bind(this)),this.widgets.au=n,this.widgets.null={enable:function(){},disable:function(){},destroy:function(){}},this._countryChanged(null,!0)}},{key:"_countryChanged",value:function(e,t){switch(this.formHelperConfig.countryElement.value){case this.formHelperConfig.nz.countryValue:this._setActiveCountry("nz"),t||this._clearElementValues("au");break;case this.formHelperConfig.au.countryValue:this._setActiveCountry("au"),t||this._clearElementValues("nz");break;default:this._setActiveCountry("null"),t||(this._clearElementValues("au"),this._clearElementValues("nz"))}}},{key:"_clearElementValues",value:function(e){for(var t in this.formHelperConfig[e].elements)if(this.formHelperConfig[e].elements.hasOwnProperty(t)){var n=this.formHelperConfig[e].elements[t];n&&this._setElementValue(n,null,t)}}},{key:"_setActiveCountry",value:function(e){this._log("Setting active country "+e);for(var t in this.widgets)this.widgets[t].disable();this.widgets[e].enable()}},{key:"_nzAddressSelected",value:function(e,t){var n=this.formHelperConfig.nz.elements,i=new AddressFinder.NZSelectedAddress(e,t);if(n.address_line_1_and_2?this._setElementValue(n.address_line_1_and_2,i.address_line_1_and_2(),"address_line_1_and_2"):(this._setElementValue(n.address_line_1,i.address_line_1(),"address_line_1"),this._setElementValue(n.address_line_2,i.address_line_2(),"address_line_2")),this._setElementValue(n.suburb,i.suburb(),"suburb"),this._setElementValue(n.city,i.city(),"city"),this._setElementValue(n.postcode,i.postcode(),"postcode"),this.formHelperConfig.nz.regionMappings){var r=this.formHelperConfig.nz.regionMappings[t.region];this._setElementValue(n.region,r,"region")}else this._setElementValue(n.region,t.region,"region")}},{key:"_auAddressSelected",value:function(e,t){var n=this.formHelperConfig.au.elements;if(n.address_line_1_and_2){var i=[t.address_line_1,t.address_line_2].filter(function(e){return null!=e}).join(", ");this._setElementValue(n.address_line_1_and_2,i,"address_line_1_and_2")}else this._setElementValue(n.address_line_1,t.address_line_1,"address_line_1"),this._setElementValue(n.address_line_2,t.address_line_2,"address_line_2");if(this._setElementValue(n.locality_name,t.locality_name,"suburb"),this._setElementValue(n.postcode,t.postcode,"postcode"),this.formHelperConfig.au.stateMappings){var r=this.formHelperConfig.au.stateMappings[t.state_territory];this._setElementValue(n.state_territory,r,"state_territory")}else this._setElementValue(n.state_territory,t.state_territory,"state_territory")}},{key:"_setElementValue",value:function(e,n,i){if(e){e.value=n;var r=document.createEvent("HTMLEvents");r.initEvent("change",!0,!1),e.dispatchEvent(r);var o=e.options;if(o)for(var s=0;s<o.length;s++)if(e.options[s].value==n){e.options[s].dispatchEvent(r);break}}else{var a="AddressFinder Error: Attempted to update value for element that could not be found.\n\nElement: "+i+"\nValue: "+n;t.console&&console.warn(a)}}},{key:"_log",value:function(e){this.widgetConfig.debug&&t.console&&console.log("FormHelper for layout "+this.formHelperConfig.label+": "+e)}}]),n}()}(document,window)}]);