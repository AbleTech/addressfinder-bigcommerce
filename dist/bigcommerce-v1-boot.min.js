"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}(function(e,t){t.AF=t.AF||{};t.AF.BigCommercePlugin=function(){function n(e){_classCallCheck(this,n);this.version="1.1.11";this.widgetConfig=e;this.layoutConfigurations=[{label:"Optimized one-page checkout (Early access)",layoutIdentifier:"micro-app-ng-checkout",countryIdentifier:"countryCodeInput",searchIdentifier:"addressLine1Input",nz:{countryValue:"string:NZ",elements:{address1:"addressLine1Input",suburb:"addressLine2Input",city:"cityInput",region:"provinceInput",postcode:"postCodeInput"},regionMappings:null},au:{countryValue:"string:AU",elements:{address1:"addressLine1Input",address2:"addressLine2Input",suburb:"cityInput",state:"provinceCodeInput",postcode:"postCodeInput"},stateMappings:{ACT:"string:ACT",NSW:"string:NSW",NT:"string:NT",QLD:"string:QLD",SA:"string:SA",TAS:"string:TAS",VIC:"string:VIC",WA:"string:WA"}}},{label:"One-page checkout (Billing details)",layoutIdentifier:"CheckoutStepBillingAddress",countryIdentifier:"FormField_11",searchIdentifier:"FormField_8",nz:{countryValue:"New Zealand",elements:{address1:"FormField_8",suburb:"FormField_9",city:"FormField_10",region:"FormField_12",postcode:"FormField_13"},regionMappings:null},au:{countryValue:"Australia",elements:{address1:"FormField_8",address2:"FormField_9",suburb:"FormField_10",state:"FormField_12",postcode:"FormField_13"},stateMappings:{ACT:"Australian Capital Territory",NSW:"New South Wales",NT:"Northern Territory",QLD:"Queensland",SA:"South Australia",TAS:"Tasmania",VIC:"Victoria",WA:"Western Australia"}}},{label:"One-page checkout (Shipping details)",layoutIdentifier:"CheckoutStepShippingAddress",countryIdentifier:"FormField_21",searchIdentifier:"FormField_18",nz:{countryValue:"New Zealand",elements:{address1:"FormField_18",suburb:"FormField_19",city:"FormField_20",region:"FormField_22",postcode:"FormField_23"},regionMappings:null},au:{countryValue:"Australia",elements:{address1:"FormField_18",address2:"FormField_19",suburb:"FormField_20",state:"FormField_22",postcode:"FormField_23"},stateMappings:{ACT:"Australian Capital Territory",NSW:"New South Wales",NT:"Northern Territory",QLD:"Queensland",SA:"South Australia",TAS:"Tasmania",VIC:"Victoria",WA:"Western Australia"}}},{label:"Create account",layoutIdentifier:"CreateAccountForm",countryIdentifier:"FormField_11",searchIdentifier:"FormField_8",nz:{countryValue:"New Zealand",elements:{address1:"FormField_8",suburb:"FormField_9",city:"FormField_10",region:"FormField_12",postcode:"FormField_13"},regionMappings:null},au:{countryValue:"Australia",elements:{address1:"FormField_8",address2:"FormField_9",suburb:"FormField_10",state:"FormField_12",postcode:"FormField_13"},stateMappings:{ACT:"Australian Capital Territory",NSW:"New South Wales",NT:"Northern Territory",QLD:"Queensland",SA:"South Australia",TAS:"Tasmania",VIC:"Victoria",WA:"Western Australia"}}}];this.formHelpers=[];this.identifyLayout()}_createClass(n,[{key:"identifyLayout",value:function t(){for(var n=0;n<this.layoutConfigurations.length;n++){var i=this.layoutConfigurations[n];var s=e.getElementById(i.layoutIdentifier);if(s){this.log("Identified layout named: "+i.label);this.initialiseFormHelper(i);this.setupMutationMonitor(i.layoutIdentifier)}}}},{key:"initialiseFormHelper",value:function t(n){var i=e.getElementById(n.searchIdentifier);if(i){var s={countryElement:e.getElementById(n.countryIdentifier),label:n.label,nz:{countryValue:n.nz.countryValue,searchElement:e.getElementById(n.nz.elements.address1),elements:{address_line_1_and_2:e.getElementById(n.nz.elements.address1),address_line_1:null,address_line_2:null,suburb:e.getElementById(n.nz.elements.suburb),city:e.getElementById(n.nz.elements.city),region:e.getElementById(n.nz.elements.region),postcode:e.getElementById(n.nz.elements.postcode)},regionMappings:null},au:{countryValue:n.au.countryValue,searchElement:e.getElementById(n.au.elements.address1),elements:{address_line_1_and_2:null,address_line_1:e.getElementById(n.au.elements.address1),address_line_2:e.getElementById(n.au.elements.address2),locality_name:e.getElementById(n.au.elements.suburb),city:null,state_territory:e.getElementById(n.au.elements.state),postcode:e.getElementById(n.au.elements.postcode)},stateMappings:n.au.stateMappings}};var r=new AF.FormHelper(this.widgetConfig,s);this.formHelpers.push(r)}}},{key:"resetAndReloadFormHelpers",value:function e(){this.log("Reset all form helpers things");for(var t=0;t<this.formHelpers.length;t++){this.formHelpers[t].destroy()}this.formHelpers=[];this.identifyLayout()}},{key:"resetAndReloadFormHelpersWithTimeout",value:function e(){var t=this;if(this._mutationTimeout){clearTimeout(this._mutationTimeout)}this._mutationTimeout=setTimeout(function(){t.resetAndReloadFormHelpers()},500)}},{key:"setupMutationMonitor",value:function t(n){var i=e.getElementById(n);if(i){this.monitorMutations(i)}}},{key:"monitorMutations",value:function e(n){var i=this;if(t.MutationObserver){var s=new MutationObserver(function(e){i.resetAndReloadFormHelpersWithTimeout()});s.observe(n,{childList:true,subtree:true})}else if(t.addEventListener){n.addEventListener("DOMAttrModified",function(e){i.resetAndReloadFormHelpersWithTimeout()},false)}else{if(t.console){console.info("AddressFinder Error - please use a more modern browser")}}}},{key:"log",value:function e(n){if(this.widgetConfig.debug&&t.console){console.log(n)}}}]);return n}()})(document,window);"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}(function(e,t){t.AF=t.AF||{};t.AF.FormHelper=function(){function e(t,n){_classCallCheck(this,e);this.widgetConfig=t;this.formHelperConfig=n;this.widgets={};this.subscriptions={};this._bindToForm()}_createClass(e,[{key:"destroy",value:function e(){for(var t in this.widgets){this.widgets[t].disable();this.widgets[t].destroy()}this.widgets=null;this.subscriptions=[];this.formHelperConfig.countryElement.removeEventListener("change",this.boundCountryChangedListener)}},{key:"_bindToForm",value:function e(){this.boundCountryChangedListener=this._countryChanged.bind(this);this.formHelperConfig.countryElement.addEventListener("change",this.boundCountryChangedListener);var n=new t.AddressFinder.Widget(this.formHelperConfig.nz.searchElement,this.widgetConfig.nzKey,"nz",this.widgetConfig.nzWidgetOptions);n.on("result:select",this._nzAddressSelected.bind(this));this.widgets["nz"]=n;var i=new t.AddressFinder.Widget(this.formHelperConfig.au.searchElement,this.widgetConfig.auKey,"au",this.widgetConfig.auWidgetOptions);i.on("result:select",this._auAddressSelected.bind(this));this.widgets["au"]=i;this.widgets["null"]={enable:function e(){},disable:function e(){},destroy:function e(){}};this._countryChanged(null,true)}},{key:"_countryChanged",value:function e(t,n){switch(this.formHelperConfig.countryElement.value){case this.formHelperConfig.nz.countryValue:this._setActiveCountry("nz");if(!n){this._clearElementValues("au")}break;case this.formHelperConfig.au.countryValue:this._setActiveCountry("au");if(!n){this._clearElementValues("nz")}break;default:this._setActiveCountry("null");if(!n){this._clearElementValues("au");this._clearElementValues("nz")}}}},{key:"_clearElementValues",value:function e(t){for(var n in this.formHelperConfig[t].elements){if(this.formHelperConfig[t].elements.hasOwnProperty(n)){var i=this.formHelperConfig[t].elements[n];if(i){this._setElementValue(i,null,n)}}}}},{key:"_setActiveCountry",value:function e(t){this._log("Setting active country "+t);for(var n in this.widgets){this.widgets[n].disable()}this.widgets[t].enable()}},{key:"_nzAddressSelected",value:function e(t,n){var i=this.formHelperConfig.nz.elements;var s=new AddressFinder.NZSelectedAddress(t,n);if(i.address_line_1_and_2){this._setElementValue(i.address_line_1_and_2,s.address_line_1_and_2(),"address_line_1_and_2")}else{this._setElementValue(i.address_line_1,s.address_line_1(),"address_line_1");this._setElementValue(i.address_line_2,s.address_line_2(),"address_line_2")}this._setElementValue(i.suburb,s.suburb(),"suburb");this._setElementValue(i.city,s.city(),"city");this._setElementValue(i.postcode,s.postcode(),"postcode");if(this.formHelperConfig.nz.regionMappings){var r=this.formHelperConfig.nz.regionMappings[n.region];this._setElementValue(i.region,r,"region")}else{this._setElementValue(i.region,n.region,"region")}}},{key:"_auAddressSelected",value:function e(t,n){var i=this.formHelperConfig.au.elements;if(i.address_line_1_and_2){var s=[n.address_line_1,n.address_line_2].filter(function(e){return e!=null}).join(", ");this._setElementValue(i.address_line_1_and_2,s,"address_line_1_and_2")}else{this._setElementValue(i.address_line_1,n.address_line_1,"address_line_1");this._setElementValue(i.address_line_2,n.address_line_2,"address_line_2")}this._setElementValue(i.locality_name,n.locality_name,"suburb");this._setElementValue(i.postcode,n.postcode,"postcode");if(this.formHelperConfig.au.stateMappings){var r=this.formHelperConfig.au.stateMappings[n.state_territory];this._setElementValue(i.state_territory,r,"state_territory")}else{this._setElementValue(i.state_territory,n.state_territory,"state_territory")}}},{key:"_setElementValue",value:function e(n,i,s){if(n){n.value=i;var r=document.createEvent("HTMLEvents");r.initEvent("change",true,false);n.dispatchEvent(r);var o=n.options;if(o){for(var a=0;a<o.length;a++){if(n.options[a].value==i){n.options[a].dispatchEvent(r);break}}}return}var l="AddressFinder Error: "+"Attempted to update value for element that could not be found.\n"+"\nElement: "+s+"\nValue: "+i;if(t.console){console.warn(l)}}},{key:"_log",value:function e(n){if(this.widgetConfig.debug&&t.console){console.log("FormHelper for layout "+this.formHelperConfig.label+": "+n)}}}]);return e}()})(document,window);"use strict";(function(e,t){var n=function e(){t._plugin=new AF.BigCommercePlugin({nzKey:t.AddressFinderConfig.key_nz||t.AddressFinderConfig.key||t.AddressFinderConfig.key_au,auKey:t.AddressFinderConfig.key_au||t.AddressFinderConfig.key||t.AddressFinderConfig.key_nz,nzWidgetOptions:t.AddressFinderConfig.nzWidgetOptions||t.AddressFinderConfig.widgetOptions||{},auWidgetOptions:t.AddressFinderConfig.auWidgetOptions||t.AddressFinderConfig.widgetOptions||{},debug:t.AddressFinderConfig.debug||false})};var i=e.createElement("script");i.src="https://api.addressfinder.io/assets/v3/widget.js";i.async=1;i.onload=n;e.body.appendChild(i)})(document,window);